<!DOCTYPE html>
<html lang="tr">
<head>
<link rel="stylesheet" href="style.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>skilleffect Editor by Echidna</title>
</head>

<body>

<!-- Background Layers -->
<div id="bg-layer" class="bg-layer"></div>
<div id="bg-layer-next" class="bg-layer"></div>

<div class="login-container" id="loginPanel">
  <div class="login-card">

    <div class="login-header">
      <h2>Giriş Yap</h2>
      <p>Devam etmek için hesabınıza giriş yapın</p>
    </div>

    <form id="loginForm">
      <div class="form-group">
        <div class="input-wrapper">
          <input type="email" id="username" required>
          <label>E-mail</label>
        </div>
        <span class="error-message" id="emailError"></span>
      </div>

      <div class="form-group">
        <div class="input-wrapper password-wrapper">
          <input type="password" id="password" required>
          <label>Şifre</label>

          <button class="password-toggle" type="button" id="passwordToggle">
            <span class="eye-icon" id="eyeIcon"></span>
          </button>
        </div>
        <span class="error-message" id="passwordError"></span>
      </div>

      <button type="submit" class="login-btn" id="loginBtn">
        <span class="btn-text">Giriş Yap</span>
        <span class="btn-loader"></span>
      </button>

      <div id="loginStatus" class="error-message"></div>
    </form>

  </div>
</div>

<!-- Utils -->
<script src="form-utils.js"></script>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { 
    getAuth, 
    signInWithEmailAndPassword 
  } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD-hTc0cpk_EZpv6-HbS6Zdl0NIOA8mAlA",
    authDomain: "makeusdream-idpw.firebaseapp.com",
    projectId: "makeusdream-idpw",
    storageBucket: "makeusdream-idpw.firebasestorage.app",
    messagingSenderId: "186224368729",
    appId: "1:186224368729:web:43f5e11ba8918181f92548",
  };

  const app = initializeApp(firebaseConfig);
  window.auth = getAuth(app);
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
</script>

<!-- Main Script -->
<script src="script.js"></script>

<!-- Background Script -->
<script>
const MAX_BG_INDEX = 2;
const INTERVAL_MS = 7500;

let currentIndex = 0;
let intervalId = null;

const layer1 = document.getElementById("bg-layer");
const layer2 = document.getElementById("bg-layer-next");

function bgName(i) {
  return i === 0 ? "background.png" : `background${i}.png`;
}

layer1.style.backgroundImage = `url('${bgName(0)}')`;

function nextBg() {
  const nextIndex = (currentIndex + 1) % (MAX_BG_INDEX + 1);
  layer2.style.backgroundImage = `url('${bgName(nextIndex)}')`;
  layer2.style.opacity = 1;

  setTimeout(() => {
    layer1.style.backgroundImage = layer2.style.backgroundImage;
    layer2.style.opacity = 0;
    currentIndex = nextIndex;
  }, 1200);
}

intervalId = setInterval(nextBg, INTERVAL_MS);
</script>

</body>
</html>
